{"version":3,"file":"gutenberg-block.js","mappings":"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","sources":["webpack://business-profile-render/external window \"React\"","webpack://business-profile-render/webpack/bootstrap","webpack://business-profile-render/webpack/runtime/compat get default export","webpack://business-profile-render/webpack/runtime/define property getters","webpack://business-profile-render/webpack/runtime/hasOwnProperty shorthand","webpack://business-profile-render/webpack/runtime/make namespace object","webpack://business-profile-render/./assets/js/gutenberg-block.js"],"sourcesContent":["module.exports = window[\"React\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const { registerBlockType } = wp.blocks;\nconst { useState, useEffect } = wp.element;\nconst { ToggleControl, PanelBody, PanelRow } = wp.components;\nconst { InspectorControls } = wp.blockEditor;\nconst { __ } = wp.i18n;\n\nregisterBlockType('rajan-vijayan/my-block', {\n    title: __('My Block', 'rajan-vijayan'),\n    icon: 'admin-site',\n    category: 'common',\n\n    edit: ({ className, attributes, setAttributes }) => {\n        const [data, setData] = useState(attributes.data);\n        const [columnVisibility, setColumnVisibility] = useState(attributes.columnVisibility);\n        const [loading, setLoading] = useState(true);\n        const [error, setError] = useState(null);\n\n        useEffect(() => {\n            fetchData();\n        }, []);\n\n        const fetchData = () => {\n            jQuery.ajax({\n                url: myplugin_ajax_object.ajax_url,\n                type: 'GET',\n                data: {\n                    action: 'my_plugin_fetch_data', // AJAX action hook\n                    nonce: myplugin_ajax_object.security // Nonce for security\n                },\n                success: function (response) {\n                    console.log(response);\n                    setLoading(false);\n                    setData(response.data);\n                    setError(null);\n                },\n                error: function (xhr, status, error) {\n                    setLoading(false);\n                    setError(xhr.responseText || error);\n                },\n            });\n        };\n\n        const toggleColumnVisibility = (columnName) => {\n            const newState = {\n                ...columnVisibility,\n                [columnName]: !columnVisibility[columnName],\n            };\n            setColumnVisibility(newState);\n            // Update the block's attributes with the new columnVisibility state\n            setAttributes({ columnVisibility: newState });\n        };\n\n        if (loading) {\n            return <div className={className}>{__('Loading...', 'miusage-plugin')}</div>;\n        }\n\n        if (error) {\n            return <div className={className}>{__('Error: Unable to fetch data', 'miusage-plugin')}</div>;\n        }\n\n        return (\n            <div className={className}>\n                <InspectorControls>\n                    <PanelBody title='Toggle'>\n                        {Object.keys(columnVisibility).map((columnName) => (\n                            <PanelRow key={`panel_${columnName}`}>\n                                <ToggleControl label={columnName} checked={columnVisibility[columnName]} onChange={() => toggleColumnVisibility(columnName)} />\n                            </PanelRow>\n                        ))}\n                    </PanelBody>\n                </InspectorControls>\n                <div className='miusage-table-wrapper' dangerouslySetInnerHTML={{ __html: generateTableHTML(data, columnVisibility) }} />\n            </div>\n        );\n    },\n\n    save: () => {\n        return null; // Save function is not used as the table is generated dynamically in the frontend\n    },\n\n    attributes: {\n        data: {\n            type: 'object',\n            default: null,\n        },\n        columnVisibility: {\n            type: 'object',\n            default: {\n                id: true,\n                fname: true,\n                lname: true,\n                email: true,\n                date: true,\n            },\n        },\n    },\n});\n\nconst generateTableHTML = (data, columnVisibility) => {\n    if (!data) {\n        return 'Empty'; // Return empty string if data is not available\n    }\n\n    // Generate HTML markup for the table\n    let tableHTML = `\n        <table class=\"miusage-table\">\n            <thead>\n                <tr>\n                    ${Object.keys(data.data.headers)\n                        .map((header) => (columnVisibility[header] ? `<th>${data.headers[header]}</th>` : ''))\n                        .join('')}\n                </tr>\n            </thead>\n            <tbody>\n                ${Object.values(data.data.rows)\n                    .map(\n                        (row) => `\n                    <tr>\n                        ${Object.keys(row)\n                            .map((columnName) => (columnVisibility[columnName] ? `<td>${row[columnName]}</td>` : ''))\n                            .join('')}\n                    </tr>\n                `\n                    )\n                    .join('')}\n            </tbody>\n        </table>\n    `;\n\n    return tableHTML;\n};"],"names":["registerBlockType","wp","blocks","useState","useEffect","element","ToggleControl","PanelBody","PanelRow","components","InspectorControls","blockEditor","__","i18n","title","icon","category","edit","className","attributes","setAttributes","data","setData","columnVisibility","setColumnVisibility","loading","setLoading","error","setError","fetchData","jQuery","ajax","url","myplugin_ajax_object","ajax_url","type","action","nonce","security","success","response","console","log","xhr","status","responseText","toggleColumnVisibility","columnName","newState","createElement","Object","keys","map","key","label","checked","onChange","dangerouslySetInnerHTML","__html","generateTableHTML","save","default","id","fname","lname","email","date","tableHTML","headers","header","join","values","rows","row"],"sourceRoot":""}